import { StickyHeader } from "./StickyHeader"
import { ContentZone } from "./ContentZone"
import Head from 'next/head'
import Image from 'next/image'
import { useState, createContext, useRef, useEffect } from "react"
import { MobileNav } from "./MobileNav"
import Script from "next/script"
import { MobileUserPanel } from "./MobileUserPanel"
import { faAngleUp } from "@fortawesome/free-solid-svg-icons"
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome"

const MyChattanoogaContext = createContext();

export const MyChattanoogaProvider = ({ children }) => {

    const [menuExpanded, setMenuExpanded] = useState(false)
    const [panelExpanded, setPanelExpanded] = useState(false)
    const [isDark, setDark] = useState(true)
    const [weatherData, setWeatherData] = useState(null)
    const [defaultWeatherLocation, setDefaultWeatherLocation] = useState(null)

    function toggleMobileNav() {
        setMenuExpanded(menuExpanded => !menuExpanded)
        console.log(menuExpanded)
    }
    function toggleMobileUserPanel() {
        setPanelExpanded(panelExpanded => !panelExpanded)
        console.log(panelExpanded)
    }
    function toggleDark() {
        setDark(isDark => !isDark);
        console.log(isDark);
    }

    const value = {
        isExpanded: {menuExpanded},
        toggleMobileNav: {toggleMobileNav},
        panelExpanded: {panelExpanded},
        toggleMobileUserPanel: {toggleMobileUserPanel},
    }

    return (
        <MyChattanoogaContext.Provider value={value}>
            <div className="flex flex-col h-screen overscroll-contain">
                <Head>
                        <title>myChattanooga</title>
                        <meta name="description" content="Generated by create next app" key="siteDescription"/>
                        <link rel="icon" href="/favicon.ico" /> 
                        <Script src="https://kit.fontawesome.com/27b6c4e65c.js" />
                </Head>

                <header className="relative w-screen shadow-sm">
                    <StickyHeader isDark={isDark} />
                </header>

                <main className="w-screen h-screen overflow-y-scroll align-center relative" >
                    <div className="sm:hidden w-full fixed h-fit object-center left-0 z-50 flex mx-auto">
                        <MobileNav menuExpanded={menuExpanded} />
                    </div>
                    <div className="sm:hidden fixed h-fit w-full object-center right-0 bottom-0 z-50">
                        <MobileUserPanel panelExpanded={panelExpanded} />
                    </div>
                    <div className="scroll-smooth p-6 lg:px-8 lg:pt-8">
                        {children}
                    </div>
                </main>

                {/* <footer className="flex items-center w-screen">
                    
                    <div className="flex-auto">
                        Hi
                    </div>
                        
                </footer> */}
            </div>
        </MyChattanoogaContext.Provider>
    )
}

export default MyChattanoogaContext
